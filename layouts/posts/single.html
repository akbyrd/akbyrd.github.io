{{- define "main" }}
{{- if not (or .Draft .Date) }}
	{{- errorf "Non-draft posts must have a date. File: %s" .File.Path }}
{{- end }}

{{- if not (or .Draft .Summary) }}
	{{- errorf "Non-draft posts must have a summary. File: %s" .File.Path }}
{{- end }}

{{- if not (or .Draft .Aliases) }}
	{{- errorf "Non-draft posts must have an alias. File: %s" .File.Path }}
{{- end }}
		<h1 class="post-title">
			{{ .LinkTitle }}
			{{- with .Date }}
			<time class="post-time" datetime="{{ .Format "2006-01-02" }}">{{ .Format "Jan 2, 2006" }}</time>
			{{- else }}
			<time class="post-time"></time>
			{{- end }}
		</h1>
		{{- $content := .Content }}
		{{- $content = partial "fixup-task-lists.html" .Content }}
		{{- $content }}
{{- end -}}
